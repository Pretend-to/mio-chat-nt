<script setup>
import { ref } from 'vue'

// 使用 defineEmits 定义 emit 函数
const emit = defineEmits(['emoji-selected', 'to-bottom', 'reset-personality', 'clean-record', 'voice-chat', 'model-select'])

const showEmoji = ref(false)

// 切换表情面板的显示状态
function toggleEmoji() {
    showEmoji.value = !showEmoji.value
}

// 插入表情
function getEmoji(e) {
    const unicode = e.detail.unicode
    emit('emoji-selected', unicode)
    toggleEmoji()
}

// 滑到底部
function toBottom(clicked) {
    emit('to-bottom', clicked)
}

// 重置人格
function resetPersonality() {
    emit('reset-personality')
}

// 清除记录
function cleanRecord() {
    emit('clean-record')
}

// 语音聊天
function voiceChat() {
    emit('voice-chat')
}

// 模型选择
function modelSelect() {
    emit('model-select')
}
</script>

<template>
    <ul class="options">
        <li class="bu-emoji">
            <emoji-picker v-show="showEmoji" ref="emojiPicker" @emoji-click="getEmoji"></emoji-picker>
            <p class="ho-emoji">表情</p>
            <svg @click="toggleEmoji" class="chat-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="20" height="20">
                <path d="M512 74.666667C270.933333 74.666667 74.666667 270.933333 74.666667 512S270.933333 949.333333 512 949.333333 949.333333 753.066667 949.333333 512 753.066667 74.666667 512 74.666667z m0 810.666666c-204.8 0-373.333333-168.533333-373.333333-373.333333S307.2 138.666667 512 138.666667 885.333333 307.2 885.333333 512 716.8 885.333333 512 885.333333z"
                ></path>
                <path d="M674.133333 608c-46.933333 57.6-100.266667 85.333333-162.133333 85.333333s-115.2-27.733333-162.133333-85.333333c-10.666667-12.8-32-14.933333-44.8-4.266667-12.8 10.666667-14.933333 32-4.266667 44.8 59.733333 70.4 130.133333 106.666667 211.2 106.666667s151.466667-36.266667 211.2-106.666667c10.666667-12.8 8.533333-34.133333-4.266667-44.8-12.8-10.666667-34.133333-8.533333-44.8 4.266667zM362.666667 512c23.466667 0 42.666667-19.2 42.666666-42.666667v-64c0-23.466667-19.2-42.666667-42.666666-42.666666s-42.666667 19.2-42.666667 42.666666v64c0 23.466667 19.2 42.666667 42.666667 42.666667zM661.333333 512c23.466667 0 42.666667-19.2 42.666667-42.666667v-64c0-23.466667-19.2-42.666667-42.666667-42.666666s-42.666667 19.2-42.666666 42.666666v64c0 23.466667 19.2 42.666667 42.666666 42.666667z"
                ></path>
            </svg>
        </li>
        <li class="bu-emoji">
            <p class="ho-emoji">滑到底部</p>
            <svg @click="toBottom(1)" class="chat-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="20" height="20">
                <path d="M896 864H128c-17.066667 0-32 14.933333-32 32s14.933333 32 32 32h768c17.066667 0 32-14.933333 32-32s-14.933333-32-32-32zM488.533333 727.466667c6.4 6.4 14.933333 8.533333 23.466667 8.533333s17.066667-2.133333 23.466667-8.533333l213.333333-213.333334c12.8-12.8 12.8-32 0-44.8-12.8-12.8-32-12.8-44.8 0l-157.866667 157.866667V170.666667c0-17.066667-14.933333-32-32-32s-34.133333 14.933333-34.133333 32v456.533333L322.133333 469.333333c-12.8-12.8-32-12.8-44.8 0-12.8 12.8-12.8 32 0 44.8l211.2 213.333334z"
                ></path>
            </svg>
        </li>
        <li class="bu-emoji">
            <p class="ho-emoji">重置人格</p>
            <svg @click="resetPersonality" class="chat-icon" viewBox="0 0 1024 1024"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M934.4 206.933333c-17.066667-4.266667-34.133333 6.4-38.4 23.466667l-23.466667 87.466667C797.866667 183.466667 654.933333 96 497.066667 96 264.533333 96 74.666667 281.6 74.666667 512s189.866667 416 422.4 416c179.2 0 339.2-110.933333 398.933333-275.2 6.4-17.066667-2.133333-34.133333-19.2-40.533333-17.066667-6.4-34.133333 2.133333-40.533333 19.2-51.2 138.666667-187.733333 232.533333-339.2 232.533333C298.666667 864 138.666667 706.133333 138.666667 512S300.8 160 497.066667 160c145.066667 0 277.333333 87.466667 330.666666 217.6l-128-36.266667c-17.066667-4.266667-34.133333 6.4-38.4 23.466667-4.266667 17.066667 6.4 34.133333 23.466667 38.4l185.6 49.066667c2.133333 0 6.4 2.133333 8.533333 2.133333 6.4 0 10.666667-2.133333 17.066667-4.266667 6.4-4.266667 12.8-10.666667 14.933333-19.2l49.066667-185.6c0-17.066667-8.533333-34.133333-25.6-38.4z"
                ></path>
            </svg>
        </li>
        <li class="bu-emoji">
            <p class="ho-emoji">清除记录</p>
            <svg @click="cleanRecord" class="chat-icon" viewBox="0 0 1024 1024"
                 xmlns="http://www.w3.org/2000/svg" width="20" height="20">
                <path d="M874.666667 241.066667h-202.666667V170.666667c0-40.533333-34.133333-74.666667-74.666667-74.666667h-170.666666c-40.533333 0-74.666667 34.133333-74.666667 74.666667v70.4H149.333333c-17.066667 0-32 14.933333-32 32s14.933333 32 32 32h53.333334V853.333333c0 40.533333 34.133333 74.666667 74.666666 74.666667h469.333334c40.533333 0 74.666667-34.133333 74.666666-74.666667V305.066667H874.666667c17.066667 0 32-14.933333 32-32s-14.933333-32-32-32zM416 170.666667c0-6.4 4.266667-10.666667 10.666667-10.666667h170.666666c6.4 0 10.666667 4.266667 10.666667 10.666667v70.4h-192V170.666667z m341.333333 682.666666c0 6.4-4.266667 10.666667-10.666666 10.666667H277.333333c-6.4 0-10.666667-4.266667-10.666666-10.666667V309.333333h490.666666V853.333333z"
                ></path>
                <path d="M426.666667 736c17.066667 0 32-14.933333 32-32V490.666667c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v213.333333c0 17.066667 14.933333 32 32 32zM597.333333 736c17.066667 0 32-14.933333 32-32V490.666667c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v213.333333c0 17.066667 14.933333 32 32 32z"
                ></path>
            </svg>
        </li>
        <li class="bu-emoji">
            <p class="ho-emoji">语音聊天</p>
            <svg @click="voiceChat" class="chat-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M544 851.946667V906.666667a32 32 0 0 1-64 0v-54.72C294.688 835.733333 149.333333 680.170667 149.333333 490.666667v-21.333334a32 32 0 0 1 64 0v21.333334c0 164.949333 133.717333 298.666667 298.666667 298.666666s298.666667-133.717333 298.666667-298.666666v-21.333334a32 32 0 0 1 64 0v21.333334c0 189.514667-145.354667 345.066667-330.666667 361.28zM298.666667 298.56C298.666667 180.8 394.165333 85.333333 512 85.333333c117.781333 0 213.333333 95.541333 213.333333 213.226667v192.213333C725.333333 608.533333 629.834667 704 512 704c-117.781333 0-213.333333-95.541333-213.333333-213.226667V298.56z m64 0v192.213333C362.666667 573.12 429.557333 640 512 640c82.496 0 149.333333-66.805333 149.333333-149.226667V298.56C661.333333 216.213333 594.442667 149.333333 512 149.333333c-82.496 0-149.333333 66.805333-149.333333 149.226667z"
                ></path>
            </svg>
        </li>
        <li class="bu-emoji">
            <p class="ho-emoji">模型选择</p>
            <svg @click="modelSelect" class="chat-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M618.666667 106.666667H405.333333v85.333333h64v42.666667H149.333333v661.333333h725.333334V234.666667H554.666667V192h64V106.666667zM234.666667 810.666667V320h554.666666v490.666667H234.666667zM21.333333 448v234.666667h85.333334V448H21.333333z m896 0v234.666667h85.333334V448h-85.333334z m-469.333333 64h-106.666667v106.666667h106.666667v-106.666667z m234.666667 0h-106.666667v106.666667h106.666667v-106.666667z"
                ></path>
            </svg>
        </li>
    </ul>
</template>

<style scoped>
ul {
    display: flex;
    padding: 4px 8px;
    margin: 0;
    border-top: 1px solid rgba(128, 128, 128, 0.502);
    list-style: none;
}

.bu-emoji {
    position: relative;

    emoji-picker {
        position: absolute;
        top: -412px;
        right: -320px;
        /* 其他样式属性 */
    }

    .ho-emoji {
        display: none;
        font-size: 12px;
        padding: 2px 4px;
        background-color: white;
        border: none;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        position: absolute;
        top: 80%;
        left: 50%;
        transform: translateX(-60%);
        white-space: nowrap;
        z-index: 1;
    }

    &:hover p.ho-emoji {
        display: block;
    }

    svg:hover {
        fill: rgb(0, 153, 255);
    }
}

@media (max-width: 600px) {

    ul {
        display: flex;
        justify-content: space-between;
        padding: 0 16px;
        border-top: 0;
        list-style: none;
    }
}
</style>